WEBFORM 1


HTML PAGE:

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="bid.WebForm1" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>HOME PAGE</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<body>
    <form id="form1" runat="server" >
        <div><center><h1>BATCH</h1></div></center>
        <div style="border-style: solid;">
            <div>
            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD NEW ENTRY
            <br />
            <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <asp:Label ID="Label1" runat="server" Text="Label">BATCH</asp:Label>
            &nbsp;&nbsp;
            <asp:TextBox ID="TextBox1" runat="server"  Width="321px" MaxLength="10"></asp:TextBox>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="TextBox1" ErrorMessage="Enter Batch Name"></asp:RequiredFieldValidator>
                <br /><br />
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <asp:Button ID="Button1" runat="server" Text="SUBMIT" OnClick="Button1_Click" /> 
            <br />
            <br />
        </div>
        <div>
            
            <br />
            
            &nbsp;&nbsp;&nbsp;&nbsp;
            
            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1"  Height="165px" Width="506px" OnRowUpdated="GridView1_RowUpdated" class="container" OnRowUpdating="GridView1_RowUpdating" >
                <Columns>
                    <asp:BoundField DataField="Id" HeaderText="Id" InsertVisible="False" ReadOnly="True" SortExpression="Id" />
                    <asp:BoundField DataField="BatchName" HeaderText="BatchName" SortExpression="BatchName" />
                    <asp:BoundField DataField="IsDelete" HeaderText="IsDelete" SortExpression="IsDelete" />
                    <asp:CommandField ShowEditButton="true" />  
                    <asp:CommandField ShowDeleteButton="true" />
                </Columns>
            </asp:GridView>
            &nbsp;
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:chateschoolConnectionString %>" SelectCommand="SELECT * FROM [TB_ChateSch_Mst_Batch]"></asp:SqlDataSource>
        </div>
        </div>
        
    </form>
</body>
</html>


CS FILE:

using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace bid
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        System.Data.SqlClient.SqlConnection con = new System.Data.SqlClient.SqlConnection(@"Data Source=localhost;Initial Catalog=chateschool;Persist Security Info=True;User ID=sa;Password=test@123");
        

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                refreshdata();
            }
        }
        protected void Button1_Click(object sender, EventArgs e)
        {
            con.Open();
            System.Data.SqlClient.SqlCommand cmd = con.CreateCommand();
            cmd.CommandType = System.Data.CommandType.Text;
            cmd.CommandText = "INSERT INTO dbo.TB_ChateSch_Mst_Batch values ('"+TextBox1.Text+"','N')";
            cmd.ExecuteNonQuery();

            string message = "Your details have been saved successfully.";
            string script = "window.onload = function(){ alert('";
            script += message;
            script += "')};";
            ClientScript.RegisterStartupScript(this.GetType(), "SuccessMessage", script, true);

            con.Close();
        }

        protected void GridView1_RowUpdated(object sender, GridViewUpdatedEventArgs e)
        {
            con.Open();
            System.Data.SqlClient.SqlCommand cmd = con.CreateCommand();
            cmd.CommandType = System.Data.CommandType.Text;
            cmd.CommandText = "UPDATE dbo.TB_ChateSch_Mst_Batch SET IsDelete = values ('" + TextBox1.Text + "','N')";
        }

       

        public void refreshdata()
        {


            //SqlCommand cmd = new SqlCommand("select * from tbl_data", con);
            //SqlDataAdapter sda = new SqlDataAdapter(cmd);
            //DataTable dt = new DataTable();
            //sda.Fill(dt);
            //GridView1.DataSource = dt;
            //GridView1.DataBind();

        }

       

        protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
            Label lbldeleteid = (Label)row.FindControl("lblID");

            con.Open();
            System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand("delete FROM dbo.TB_ChateSch_Mst_Batch where id='" + Convert.ToInt32(row.RowIndex) + "'", con);

            cmd.ExecuteNonQuery();
            con.Close();

        }

          
    }

}



--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



bid application:



HTML:-

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="bid.aspx.cs" Inherits="bid.bid" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        body
        {
            font-family: Arial;
            font-size: 10pt;
        }
        table
        {
            border: 1px solid #ccc;
            width: 450px;
            margin-bottom: -1px;
        }
        table th
        {
            background-color: #F7F7F7;
            color: #333;
            font-weight: bold;
        }
        table th, table td
        {
            padding: 5px;
            border-color: #ccc;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" DataSourceID="SqlDataSource1"
        DataKeyNames="Id" OnRowDataBound="OnRowDataBound" EmptyDataText="No records has been added.">
        <Columns>
            <asp:BoundField DataField="BatchName" HeaderText="BatchName" ItemStyle-Width="150" />
            <asp:BoundField DataField="IsDelete" HeaderText="IsDelete" ItemStyle-Width="150" />
            <asp:CommandField ButtonType="Link" ShowEditButton="true" ShowDeleteButton="true"
                ItemStyle-Width="100" />
        </Columns>
    </asp:GridView>
    <table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse">
        <tr>
            <td style="width: 150px">
               BatchName :<br />
                <asp:TextBox ID="txtName" runat="server" Width="140" />
            </td>
            <td style="width: 150px">
                IsDelete:<br />
                <asp:TextBox ID="txtCountry" runat="server" Width="140" />
            </td>
            <td style="width: 100px">
                <asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="Insert" />
            </td>
        </tr>
    </table>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:chateschoolConnectionString %>"
        SelectCommand="SELECT Id, BatchName , IsDelete FROM dbo.TB_ChateSch_Mst_Batch" 
        InsertCommand="INSERT INTO dbo.TB_ChateSch_Mst_Batch VALUES (@BatchName, @IsDelete)"
        UpdateCommand="UPDATE dbo.TB_ChateSch_Mst_Batch SET Name = @BatchName, IsDelete = @Country WHERE Id = @Id"
        DeleteCommand="DELETE FROM dbo.TB_ChateSch_Mst_Batch WHERE Id = @Id" OnSelecting="SqlDataSource1_Selecting">
        <InsertParameters>
            <asp:ControlParameter Name="BatchName" ControlID="BatchName" Type="String" />
            <asp:ControlParameter Name="IsDelete"  Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="Id" Type="Int32" />
            <asp:Parameter Name="BatchName" Type="String" />
            <asp:Parameter Name="IsDelete" Type="String" />
        </UpdateParameters>
        <DeleteParameters>
            <asp:Parameter Name="Id" Type="Int32" />
        </DeleteParameters>
    </asp:SqlDataSource>
    </form>
</body>
</html>


CS FILE:-

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace bid
{
    public partial class bid : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
        {
            
        }

        protected void Insert(object sender, EventArgs e)
        {
            SqlDataSource1.Insert();

        }

        protected void OnRowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow && GridView1.EditIndex != e.Row.RowIndex)
            {
                (e.Row.Cells[2].Controls[2] as LinkButton).Attributes["onclick"] = "return confirm('Do you want to delete this row?');";
            }
        }
    }
}
